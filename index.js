import{A as Q,S as $,N as A,P as D,K as W,M as ee,a as u,R as re,i as M}from"./assets/vendor-CTgcl9iI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const r={menuOpenBtn:document.querySelector(".header-burger-btn"),menuCloseBtn:document.querySelector(".burger-menu-close"),menuBackdrop:document.querySelector(".burger-menu"),menuLinksList:document.querySelector(".content-list"),furnitureCategoriesList:document.querySelector(".category-list"),furnitureFurnituresList:document.querySelector(".furniture-list"),furnitureLoadMoreBtn:document.querySelector(".load-more-button"),furnitureLoader:document.querySelector("div.container-furniture .loader"),feedbackFeedbacksList:document.querySelector(".feedback-swiper-wrapper"),furnitureDetailsBackdrop:document.querySelector("[data-backdrop-furniture-details]"),furnitureDetailsModal:document.querySelector(".furniture-modal"),furnitureDetailsCloseBtn:document.querySelector("[data-backdrop-furniture-close]"),furnitureDetailsImages:document.querySelector(".furniture-modal-img-list"),furnitureDetailsInfo:document.querySelector(".furniture-modal-info"),furnitureDetailsOrderBtn:document.querySelector("[data-backdrop-furniture-order"),orderBackdrop:document.querySelector("[data-backdrop-order]"),orderCloseBtn:document.querySelector("[data-backdrop-order-close]"),orderForm:document.querySelector(".form-modal"),orderLoader:document.querySelector("[data-loader-order]")};function te(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"};new Q(".accordion-list",e)}function ne(){new $(".swiper",{modules:[A,D,W,ee],speed:350,slidesPerGroup:1,grabCursor:!0,loop:!1,loopPreventsSliding:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".paginator",clickable:!0},navigation:{nextEl:".btn-next",prevEl:".btn-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},keyboard:{enabled:!0,onlyInViewport:!0}})}function oe(){r.menuBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",_),r.menuBackdrop.addEventListener("click",N),r.menuCloseBtn.addEventListener("click",x),r.menuLinksList.addEventListener("click",U)}function k(){r.menuBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",_),r.menuBackdrop.removeEventListener("click",N),r.menuCloseBtn.removeEventListener("click",x),r.menuLinksList.removeEventListener("click",U)}const p="https://furniture-store-v2.b.goit.study",g={FURNITURES:"/api/furnitures",FURNITURES_BY_ID:"/api/furnitures/",CATEGORIES:"/api/categories",FEEDBACKS:"/api/feedbacks",ORDERS:"/api/orders"},q=8,ie=10,se={"Всі товари":"all-furniture","М'які меблі":"upholstered-furniture","Шафи та системи зберігання":"wardrobes-storage","Ліжка та матраци":"beds-mattresses",Столи:"tables","Стільці та табурети":"chairs-stools",Кухні:"kitchens","Меблі для дитячої":"kids-furniture","Меблі для офісу":"office-furniture","Меблі для передпокою":"hallway-furniture","Меблі для ванної кімнати":"bathroom-furniture","Садові та вуличні меблі":"outdoor-garden-furniture","Декор та аксесуари":"decor-accessories"};async function ae(){const{data:e}=await u.get(`${p}${g.CATEGORIES}`);return e}async function C(e=1){const{data:t}=await u.get(`${p}${g.FURNITURES}`,{params:{page:e,limit:q}});return t}async function O(e=1,t="all"){const{data:n}=await u.get(`${p}${g.FURNITURES}`,{params:{page:e,limit:q,category:t}});return n}async function ce(e){const{data:t}=await u.get(`${p}${g.FURNITURES_BY_ID}${e}`);return console.log(t),t}async function le(){const{data:{feedbacks:e}}=await u.get(`${p}${g.FEEDBACKS}`,{params:{limit:ie}});return e}async function ue(e){return await u.post(`${p}${g.ORDERS}`,e)}const de="data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='1024'%20height='1024'%20viewBox='0%200%201024%201024'%3e%3cg%20id='icomoon-ignore'%3e%3c/g%3e%3cpath%20fill='%23000'%20d='M278.017%20611.115l-63.573%20275.285c-1.969%208.337-1.378%2017.071%201.696%2025.067s8.486%2014.878%2015.532%2019.746c7.045%204.873%2015.396%207.505%2023.961%207.556s16.946-2.483%2024.049-7.27l232.319-154.88%20232.32%20154.88c7.27%204.826%2015.838%207.309%2024.563%207.117%208.721-0.188%2017.173-3.046%2024.222-8.188%207.049-5.137%2012.356-12.314%2015.206-20.557%202.85-8.247%203.106-17.165%200.734-25.562l-78.037-273.067%20193.536-174.165c6.199-5.581%2010.628-12.857%2012.732-20.928%202.108-8.070%201.805-16.582-0.875-24.481s-7.612-14.84-14.195-19.964c-6.579-5.124-14.519-8.207-22.835-8.867l-243.243-19.371-105.259-233.003c-3.354-7.503-8.811-13.873-15.71-18.344-6.895-4.47-14.938-6.849-23.159-6.849-8.218%200-16.26%202.379-23.159%206.849-6.895%204.471-12.352%2010.842-15.71%2018.344l-105.257%20233.003-243.243%2019.328c-8.173%200.648-15.986%203.636-22.505%208.607s-11.467%2011.716-14.253%2019.426c-2.786%207.71-3.292%2016.060-1.457%2024.050s5.933%2015.283%2011.804%2021.004l179.797%20175.232zM399.745%20426.539c7.616-0.6%2014.93-3.238%2021.175-7.636s11.194-10.397%2014.322-17.366l76.757-169.856%2076.757%20169.856c3.132%206.969%208.077%2012.967%2014.323%2017.366s13.559%207.037%2021.175%207.636l169.472%2013.44-139.563%20125.611c-12.117%2010.923-16.939%2027.733-12.501%2043.435l53.461%20187.093-159.403-106.283c-6.997-4.698-15.232-7.202-23.659-7.202s-16.661%202.505-23.659%207.202l-166.569%20111.061%2044.8-193.963c1.643-7.134%201.422-14.571-0.64-21.594s-5.897-13.402-11.136-18.513l-129.621-126.379%20174.507-13.909z'%3e%3c/path%3e%3c/svg%3e",fe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.893%207.44213L19.9727%207.70529C20.0383%207.90391%2019.9831%208.12465%2019.8331%208.26318L14.9865%2012.6316L16.4225%2019.1788C16.4711%2019.3881%2016.3965%2019.6078%2016.233%2019.7367L16.0136%2019.8946C15.9284%2019.9652%2015.8227%2020.0023%2015.7145%2019.9999C15.6231%2020.0019%2015.5332%2019.9763%2015.4552%2019.9262L10.0002%2016.421L4.57514%2019.9262C4.49714%2019.9763%204.40717%2020.0019%204.31585%2019.9999C4.2076%2020.0023%204.10189%2019.9652%204.01668%2019.8946L3.76736%2019.7367C3.60386%2019.6078%203.52926%2019.3881%203.57788%2019.1788L5.01393%2012.6316L0.177238%208.2737C0.0195078%208.136%20-0.0401977%207.90913%200.0276496%207.70529L0.137348%207.44213C0.195676%207.23416%200.371037%207.08693%200.57614%207.07372L6.94861%206.53688L9.39188%200.336955C9.47017%200.131058%209.66039%20-0.0027956%209.87057%200.000116994H10.1298C10.3381%20-0.00454821%2010.5263%200.130692%2010.5985%200.336955L13.0817%206.53688L19.4542%207.07372C19.6593%207.08693%2019.8346%207.23416%2019.893%207.44213ZM14.1089%2016.9052L12.992%2011.9789L16.6519%208.68423L11.8551%208.28423L10.0002%203.58955V14.2631L14.1089%2016.9052Z'%20fill='%23080C09'/%3e%3c/svg%3e",me="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.0709%200.648363C9.41464%20-0.216122%2010.5854%20-0.216121%2010.9291%200.648365L12.9579%205.75071C13.1029%206.11516%2013.4306%206.36417%2013.8067%206.39571L19.0727%206.83732C19.9649%206.91215%2020.3267%208.07684%2019.6469%208.68594L15.6348%2012.2809C15.3483%2012.5378%2015.223%2012.9407%2015.3106%2013.3246L16.5364%2018.6999C16.744%2019.6106%2015.7969%2020.3305%2015.033%2019.8424L10.5246%2016.9619C10.2025%2016.7561%209.79752%2016.7561%209.4755%2016.9619L4.967%2019.8424C4.20312%2020.3305%203.25596%2019.6106%203.46364%2018.6999L4.68943%2013.3246C4.77699%2012.9407%204.65183%2012.5378%204.36527%2012.2809L0.353063%208.68594C-0.326719%208.07684%200.0350679%206.91215%200.927293%206.83732L6.19337%206.39571C6.56952%206.36417%206.89717%206.11516%207.04208%205.75071L9.0709%200.648363Z'%20fill='%23080C09'/%3e%3c/svg%3e";function pe(e){const n=[{_id:"all",name:"Всі товари"},...e].map(({_id:s,name:o})=>`
        <li class="category-item"
            data-category-id="${s}" 
            data-category-type="${se[o]||"unknown"}"
        >
            <p class="category-name">${o}</p>
        </li>
        `).join("");r.furnitureCategoriesList.insertAdjacentHTML("beforeend",n)}function S(e){const t=e.map(({_id:n,images:s,name:o,color:i,price:a})=>{const f=i.map(l=>`<li class="furniture-color" style="background-color: ${l};"></li>`).join("");return`
            <li class="furniture-item" data-furniture-id="${n}">
                <img class="furniture-image" src="${s[0]}" alt="${o}"/>
                <div class="furniture-info">
                    <h3 class="furniture-name">${o}</h3>
                    <ul class="furniture-colors">
                        ${f}
                    </ul>
                    <p class="furniture-price">${a} грн</p>
                </div>
                <button class="furniture-button" type="button">Детальніше</button>
            </li>
            `}).join("");r.furnitureFurnituresList.insertAdjacentHTML("beforeend",t)}function F(){console.log("furnitureLoadMoreBtn show"),r.furnitureLoadMoreBtn.classList.remove("is-hidden")}function I(){console.log("furnitureLoadMoreBtn hide"),r.furnitureLoadMoreBtn.classList.add("is-hidden")}function P(){r.furnitureLoader.classList.remove("is-hidden")}function v(){r.furnitureLoader.classList.add("is-hidden")}function R(e){r.furnitureCategoriesList.querySelectorAll(".category-item").forEach(t=>t.classList.remove("category-item-active")),e.classList.add("category-item-active")}function ge(e){const t=e.map(({rate:n,descr:s,name:o})=>`
        <li class="swiper-slide">
        <div class="feedback-item">
          <div class="feedback-rate" data-rate="${n}"></div>
          <p class="feedback-descr">${s}</p>
          <p class="feedback-author">${o}</p>
          </div>
        </li>`).join("");r.feedbackFeedbacksList.innerHTML=t,r.feedbackFeedbacksList.querySelectorAll(".feedback-rate").forEach(n=>Le(n))}function Le(e){const t=Number.parseFloat(e.dataset.rate);new re(e,{number:5,score:t,step:.5,readOnly:!0,starOff:de,starOn:me,starHalf:fe,round:{down:.29,full:.7,up:.8}}).init()}function ye(e){const{name:t,category:{name:n},price:s,rate:o,color:i,description:a,sizes:f,images:l}=e,d=l.map(L=>`
        <li class="furniture-modal-img-item">
          <img
            class="furniture-modal-img"
            src="${L}"
            alt="${a}"
            loading="lazy"
          />
      </li>
      `).join(""),w=i.map(L=>`
        <li
            class="furniture-modal-color"
            style="background-color: ${L}"
            data-color="${L}"
          >
        </li>
      `).join(""),J=`
    <h3 class="furniture-modal-name">${t}</h3>
    <p class="furniture-modal-category">${n}</p>
    <p class="furniture-modal-price">${s} грн</p>
    <div class="furniture-modal-rate">${o}</div>
    <p class="furniture-modal-subtitle">Колір</p>
    <ul class="furniture-modal-colors">${w}</ul>
    <p class="furniture-modal-description">${a}</p>
    <p class="furniture-modal-size">Розміри: ${f}</p>
  `;r.furnitureDetailsImages.innerHTML=d,r.furnitureDetailsInfo.innerHTML=J}function T(e){document.querySelectorAll(".furniture-modal-color").forEach(t=>t.classList.remove("current-color")),e.classList.add("current-color")}function ve(){r.orderLoader.classList.remove("is-hidden")}function he(){r.orderLoader.classList.add("is-hidden")}function ke(){r.orderBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",Y),r.orderCloseBtn.addEventListener("click",z),r.orderBackdrop.addEventListener("click",K),r.orderForm.addEventListener("submit",Z)}function b(){r.orderBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",Y),r.orderCloseBtn.removeEventListener("click",z),r.orderBackdrop.removeEventListener("click",K),r.orderForm.removeEventListener("submit",Z)}function be(e){let t=!0;const n=e.querySelector("#user-name"),s=e.querySelector("#user-phone"),o=e.querySelector("#user-comment");e.querySelectorAll(".error-text").forEach(d=>d.style.opacity=0),e.querySelectorAll(".form-input").forEach(d=>d.classList.remove("invalid")),/^[A-Za-zА-Яа-яЇїІіЄєҐґ'\-\s]{2,}$/.test(n.value.trim())||(B(n,"Введіть коректне ім'я (лише літери, мінімум 2)"),t=!1);const a=s.value.trim().replace(/\D/g,"");/^[0-9]{12}$/.test(a)||(B(s,"Введіть коректний номер телефону (12 цифр, наприклад 380XXXXXXXXX)"),t=!1);const l=o.value.trim();return l.length>0&&l.length<5&&(B(o,"Коментар має містити щонайменше 5 символів"),t=!1),t}function Ee(){r.orderForm.reset(),r.orderForm.querySelectorAll(".error-text").forEach(e=>e.style.opacity=0),r.orderForm.querySelectorAll(".form-input").forEach(e=>e.classList.remove("invalid"))}function B(e,t){const n=e.parentElement.querySelector(".error-text");e.classList.add("invalid"),n&&(n.textContent=t,n.style.opacity=1)}function we(e){const t=e.target;t.classList.remove("invalid");const n=t.parentElement.querySelector(".error-text");n&&(n.style.opacity=0)}r.orderForm.querySelectorAll(".form-input").forEach(e=>{e.addEventListener("input",we)});function Be(){r.furnitureDetailsBackdrop.classList.add("is-open"),r.furnitureDetailsModal.scrollTop=0,document.body.classList.add("no-scroll"),document.addEventListener("keydown",V),r.furnitureDetailsCloseBtn.addEventListener("click",H),r.furnitureDetailsBackdrop.addEventListener("click",j),r.furnitureDetailsOrderBtn.addEventListener("click",X),document.querySelector(".furniture-modal-colors").addEventListener("click",G)}function E(){r.furnitureDetailsBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",V),r.furnitureDetailsCloseBtn.removeEventListener("click",H),r.furnitureDetailsBackdrop.removeEventListener("click",j),r.furnitureDetailsOrderBtn.removeEventListener("click",X),document.querySelector(".furniture-modal-colors").removeEventListener("click",G)}let c=null,m=null,y=null,h=null;async function Ce(){m="all",c=1;try{const e=await ae();pe(e);const t=r.furnitureCategoriesList.querySelector('.category-item[data-category-id="all"]');R(t);const{furnitures:n,totalItems:s,limit:o}=await C();S(n),v(),o*c<s&&F();const i=await le();ge(i),ne(),te()}catch(e){console.log(e.message)}finally{v()}}function Se(){oe()}function x(){k()}function N(e){e.target===r.menuBackdrop&&k()}function _(e){e.key==="Escape"&&k()}function U(e){e.target.nodeName==="A"&&k()}async function Fe(e){const t=e.target.closest(".category-item");if(t){R(t),c=1,r.furnitureFurnituresList.innerHTML="",I(),P();try{m=t.dataset.categoryId;const{furnitures:n,totalItems:s,limit:o}=m==="all"?await C(c):await O(c,m);S(n),o*c<s&&F()}catch(n){console.log(n.message)}finally{v()}}}async function Me(){c++,I(),P();try{const{furnitures:e,totalItems:t,limit:n}=m==="all"?await C(c):await O(c,m);S(e),n*c<t&&(console.log(n*c<t),F())}catch(e){console.log(e.message)}finally{v()}}async function $e(e){if(e.target.nodeName==="BUTTON"){y=e.target.closest(".furniture-item").dataset.furnitureId;try{const t=await ce(y);ye(t),h=t.color[0],T(document.querySelector(".furniture-modal-color"))}catch(t){console.log(t.message)}console.log(y),console.log(h),Be()}}function H(){E()}function j(e){e.target===r.furnitureDetailsBackdrop&&E()}function V(e){e.key==="Escape"&&E()}function X(e){E(),ke()}function G(e){e.target.nodeName==="LI"&&(h=e.target.dataset.color,T(e.target))}function z(){b()}function K(e){e.target===r.orderBackdrop&&b()}function Y(e){e.key==="Escape"&&b()}async function Z(e){if(e.preventDefault(),!be(r.orderForm))return;ve();const t=r.orderForm.elements["user-name"].value.trim(),n=r.orderForm.elements["user-phone"].value.trim().replace(/\D/g,""),s=r.orderForm.elements["user-comment"].value.trim()||"Немає коментаря",o={name:t,phone:n,modelId:y||"682f9bbf8acbdf505592ac36",color:h||"#1212ca",comment:s};try{const i=await ue(o);console.log("Вся відповідь сервера:",i),console.log("Тільки data:",i.data),M.success({title:"Успіх!",message:`Замовлення №${i.data.orderNum} успішно створено.`,position:"topRight"}),Ee(),b()}catch(i){let a="Сталася невідома помилка. Спробуйте ще раз.";i.response&&i.response.data&&i.response.data.message&&(a=i.response.data.message),M.error({title:"Помилка",message:a,position:"topRight"})}finally{he()}}const Ae="https://furniture-store-v2.b.goit.study/api";u.defaults.baseURL=Ae;const De=document.querySelector(".popular-list");async function qe(){try{const{data:e}=await u.get("/furnitures",{params:{type:"popular"}}),n=e.furnitures.map(s=>{const{_id:o,name:i,images:a,price:f,color:l}=s,d=a[0];return`
          <li class="furniture-item swiper-slide" data-id="${o}">
            <div class="furniture-visual">
              <img src="${d}" alt="${i}" width="310" height="257">
            </div>
            <div class="furniture-info">
              <h3 class="furniture-name">${i}</h3>
              <ul class="color-list">
                ${l.map(w=>`<li class="color-dot" style="background-color:${w}"></li>`).join("")}
              </ul>
              <p class="furniture-price">${f} грн</p>
            </div>
            <button class="furniture-btn" type="button">Детальніше</button>
          </li>
        `}).join("");De.insertAdjacentHTML("beforeend",n)}catch(e){console.error(e)}}async function Oe(){await qe();const e=new $(".popular-viewport",{modules:[A,D],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,centeredSlides:!1,pagination:{el:".popular-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".popular-next",prevEl:".popular-prev"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:4}},slidesOffsetBefore:0,slidesOffsetAfter:0}),t=document.querySelector(".popular-prev"),n=document.querySelector(".popular-next"),s=()=>{t.toggleAttribute("disabled",e.isBeginning),n.toggleAttribute("disabled",e.isEnd)};e.on("afterInit slideChange reachBeginning reachEnd fromEdge",s),s()}Oe();document.addEventListener("DOMContentLoaded",Ce);r.menuOpenBtn.addEventListener("click",Se);r.furnitureCategoriesList.addEventListener("click",Fe);r.furnitureLoadMoreBtn.addEventListener("click",Me);r.furnitureFurnituresList.addEventListener("click",$e);
//# sourceMappingURL=index.js.map
