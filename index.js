import{A,S as I,N as $,P,K as O,M as T,a as m}from"./assets/vendor-DMqudEdn.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const a={menuOpenBtn:document.querySelector(".header-burger-btn"),menuCloseBtn:document.querySelector(".burger-menu-close"),menuBackdrop:document.querySelector(".burger-menu"),menuLinksList:document.querySelector(".content-list"),furnitureCategoriesList:document.querySelector(".category-list"),furnitureFurnituresList:document.querySelector(".furniture-list"),furnitureLoadMoreBtn:document.querySelector(".load-more-button"),furnitureLoader:document.querySelector("div.container-furniture .loader"),feedbackFeedbacksList:document.querySelector(".swiper-wrapper"),orderBackdrop:document.querySelector("[data-backdrop-order]"),orderCloseBtn:document.querySelector("[data-backdrop-order-close]"),orderForm:document.querySelector(".form-modal"),orderLoader:document.querySelector("[data-loader-order]")};function N(){const t={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"};new A(".accordion-list",t)}function x(){new I(".swiper",{modules:[$,P,O,T],speed:350,slidesPerGroup:1,grabCursor:!0,loop:!1,loopPreventsSliding:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".paginator",clickable:!0},navigation:{nextEl:".btn-next",prevEl:".btn-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},keyboard:{enabled:!0,onlyInViewport:!0}})}function U(){a.menuBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",_),a.menuBackdrop.addEventListener("click",B),a.menuCloseBtn.addEventListener("click",R),a.menuLinksList.addEventListener("click",q)}function y(){a.menuBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",_),a.menuBackdrop.removeEventListener("click",B),a.menuCloseBtn.removeEventListener("click",R),a.menuLinksList.removeEventListener("click",q)}const f="https://furniture-store-v2.b.goit.study",L={FURNITURES:"/api/furnitures",FURNITURES_BY_ID:"/api/furnitures/",CATEGORIES:"/api/categories",FEEDBACKS:"/api/feedbacks",ORDERS:"/api/orders"},w=8,H=10,D={"Всі товари":"all-furniture","М'які меблі":"upholstered-furniture","Шафи та системи зберігання":"wardrobes-storage","Ліжка та матраци":"beds-mattresses",Столи:"tables","Стільці та табурети":"chairs-stools",Кухні:"kitchens","Меблі для дитячої":"kids-furniture","Меблі для офісу":"office-furniture","Меблі для передпокою":"hallway-furniture","Меблі для ванної кімнати":"bathroom-furniture","Садові та вуличні меблі":"outdoor-garden-furniture","Декор та аксесуари":"decor-accessories"};async function j(){const{data:t}=await m.get(`${f}${L.CATEGORIES}`);return t}async function b(t=1){const{data:e}=await m.get(`${f}${L.FURNITURES}`,{params:{page:t,limit:w}});return e}async function V(){const{data:{feedbacks:t}}=await m.get(`${f}${L.FEEDBACKS}`,{params:{limit:H}});return t}class z{constructor(e){var r,o;this._id=e._id,this.name=e.name,this.description=e.description,this.images=e.images||[],this.rate=e.rate||0,this.price=e.price,this.sizes=e.sizes,this.color=e.color||[],this.type=e.type,this.category={_id:((r=e.category)==null?void 0:r._id)||"",name:((o=e.category)==null?void 0:o.name)||""}}getMainImage(){return this.images[0]||""}getAdditionalImages(){return this.images.slice(1)}getFormattedPrice(){return this.price.toLocaleString("uk-UA")}getCategoryName(){return this.category.name}}async function G(t){try{const e=await m.get(`${f}/furnitures/${t}`);return new z(e.data)}catch(e){throw console.error("Error fetching furniture:",e),e}}async function C(t=1,e="all"){const{data:r}=await m.get(`${f}${L.FURNITURES}`,{params:{page:t,limit:w,category:e}});return r}function K(t){const r=[{_id:"all",name:"Всі товари"},...t].map(({_id:o,name:n})=>`
        <li class="category-item"
            data-category-id="${o}" 
            data-category-type="${D[n]||"unknown"}"
        >
            <p class="category-name">${n}</p>
        </li>
        `).join("");a.furnitureCategoriesList.insertAdjacentHTML("beforeend",r)}function v(t){const e=t.map(({_id:r,images:o,name:n,color:i,price:c})=>{const s=i.map(g=>`<li class="furniture-color" style="background-color: ${g};"></li>`).join("");return`
            <li class="furniture-item" data-category-id="${r}">
                <img class="furniture-image" src="${o[0]}" alt="${n}"/>
                <div class="furniture-info">
                    <h3 class="furniture-name">${n}</h3>
                    <ul class="furniture-colors">
                        ${s}
                    </ul>
                    <p class="furniture-price">${c} грн</p>
                </div>
                <button class="furniture-button" type="button">Детальніше</button>
            </li>
            `}).join("");a.furnitureFurnituresList.insertAdjacentHTML("beforeend",e)}function S(){console.log("furnitureLoadMoreBtn show"),a.furnitureLoadMoreBtn.classList.remove("is-hidden")}function M(){console.log("furnitureLoadMoreBtn hide"),a.furnitureLoadMoreBtn.classList.add("is-hidden")}function F(){a.furnitureLoader.classList.remove("is-hidden")}function h(){a.furnitureLoader.classList.add("is-hidden")}function X(t){const e=t.map(({rate:r,descr:o,name:n})=>`
        <li class="swiper-slide">
          <div class="feedback-item">
            <p class="feedback-rate"> ${r}</p>
            <p class="feedback-descr">${o}</p>
            <p class="feedback-author">${n}</p>
          </div>
        </li>`).join("");a.feedbackFeedbacksList.insertAdjacentHTML("beforeend",e)}function Y(t){const e=t.target;e.classList.remove("invalid");const r=e.parentElement.querySelector(".error-text");r&&(r.style.opacity=0)}a.orderForm.querySelectorAll(".form-input").forEach(t=>{t.addEventListener("input",Y)});let l=null,d=null;async function W(){d="all",l=1;try{const t=await j();K(t);const{furnitures:e,totalItems:r,limit:o}=await b();v(e),h(),o*l<r&&S();const n=await V();X(n),x(),N()}catch(t){console.log(t.message)}finally{h()}}function J(){U()}function R(){y()}function B(t){t.target===a.menuBackdrop&&y()}function _(t){t.key==="Escape"&&y()}function q(t){t.target.nodeName==="A"&&y()}async function Q(t){if(t.target.closest(".category-item")){l=1,a.furnitureFurnituresList.innerHTML="",M(),F();try{d=t.target.closest(".category-item").dataset.categoryId;const{furnitures:e,totalItems:r,limit:o}=d==="all"?await b(l):await C(l,d);v(e),o*l<r&&S()}catch(e){console.log(e.message)}finally{h()}}}async function Z(){l++,M(),F();try{const{furnitures:t,totalItems:e,limit:r}=d==="all"?await b(l):await C(l,d);v(t),r*l<e&&(console.log(r*l<e),S())}catch(t){console.log(t.message)}finally{h()}}class ee{constructor(e,r={}){this.container=e,this.maxStars=r.max||5,this.currentRating=r.rating||0,this.step=r.step||.5,this.readOnly=r.readOnly||!1,this.onChange=r.onChange||null,this.init()}init(){this.container.classList.add("star-rating-container"),this.container.innerHTML="";for(let e=1;e<=this.maxStars;e++){const r=document.createElement("span");r.classList.add("star"),r.dataset.value=e,this.container.appendChild(r)}this.readOnly||(this.container.addEventListener("click",this.handleClick.bind(this)),this.container.addEventListener("mousemove",this.handleHover.bind(this)),this.container.addEventListener("mouseleave",this.handleMouseLeave.bind(this))),this.setRating(this.currentRating)}handleClick(e){const r=e.target.closest(".star");if(!r)return;const o=parseFloat(r.dataset.value),n=r.getBoundingClientRect(),i=e.clientX-n.left,c=n.width;let s;this.step===.5&&i<c/2?s=o-.5:s=o,this.setRating(s),this.onChange&&this.onChange(s)}handleHover(e){const r=e.target.closest(".star");if(!r)return;const o=parseFloat(r.dataset.value),n=r.getBoundingClientRect(),i=e.clientX-n.left,c=n.width;let s;this.step===.5&&i<c/2?s=o-.5:s=o,this.renderStars(s)}handleMouseLeave(){this.renderStars(this.currentRating)}setRating(e){this.currentRating=Math.min(Math.max(e,0),this.maxStars),this.renderStars(this.currentRating)}renderStars(e){this.container.querySelectorAll(".star").forEach((o,n)=>{const i=n+1;o.classList.remove("full","half","empty"),e>=i?o.classList.add("full"):e>=i-.5?o.classList.add("half"):o.classList.add("empty")})}getRating(){return this.currentRating}}function te(t){const e=document.querySelector(".product_modal_img > img");e&&t.getMainImage()&&(e.src=t.getMainImage(),e.alt=t.name);const r=document.querySelectorAll(".product_modal_img_horizontal img"),o=t.getAdditionalImages();r.forEach((p,u)=>{o[u]&&(p.src=o[u],p.alt=`${t.name} ${u+2}`)});const n=document.querySelector(".product_modal_name");n&&(n.textContent=t.name);const i=document.querySelector(".product_modal_category");i&&(i.textContent=t.getCategoryName());const c=document.querySelector(".price_number");c&&(c.textContent=t.getFormattedPrice());const s=document.querySelector(".modal_description");s&&(s.textContent=t.description);const g=document.querySelector(".product_modal_size");g&&(g.textContent=`Розміри: ${t.sizes}`),window.starRating&&window.starRating.setRating(t.rate);const k=document.querySelector(".product_colors");k&&t.color&&t.color.length>0&&(k.innerHTML="",t.color.forEach(p=>{const u=document.createElement("li");u.classList.add("product_color_circle"),u.style.backgroundColor=p,k.appendChild(u)}))}async function re(t){const e=document.querySelector("[data-backdrop-furniture-details]");if(!e){console.error("Modal backdrop not found");return}try{const r=await G(t);te(r),e.classList.add("is-open")}catch(r){console.error("Failed to load furniture details:",r),alert("Не вдалося завантажити деталі меблів. Спробуйте ще раз.")}}function E(){const t=document.querySelector("[data-backdrop-furniture-details]");t&&t.classList.remove("is-open")}function ne(){const t=document.querySelector("[data-backdrop-order]");t&&t.classList.add("is-open")}function oe(){document.addEventListener("click",o=>{const n=o.target.closest("[data-furniture-id]");if(n){o.preventDefault();const i=n.dataset.furnitureId;re(i)}});const t=document.querySelector(".product_modal_close");t==null||t.addEventListener("click",E);const e=document.querySelector("[data-backdrop-furniture-details]");e==null||e.addEventListener("click",o=>{o.target===e&&E()});const r=document.querySelector(".product_modal_button");r==null||r.addEventListener("click",o=>{o.preventDefault(),ne()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&E()})}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("#my-rater");if(t){const e=new ee(t,{max:5,rating:4.5,step:.5,readOnly:!0,onChange:r=>{console.log("New rating:",r)}});window.updateRating=r=>{e.setRating(r)},window.starRating=e}oe()});document.addEventListener("DOMContentLoaded",W);a.menuOpenBtn.addEventListener("click",J);a.furnitureCategoriesList.addEventListener("click",Q);a.furnitureLoadMoreBtn.addEventListener("click",Z);
//# sourceMappingURL=index.js.map
