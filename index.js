import{A as O,S,N as C,P as M,K as T,M as x,a as d}from"./assets/vendor-DMqudEdn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const a={menuOpenBtn:document.querySelector(".header-burger-btn"),menuCloseBtn:document.querySelector(".burger-menu-close"),menuBackdrop:document.querySelector(".burger-menu"),menuLinksList:document.querySelector(".content-list"),furnitureCategoriesList:document.querySelector(".category-list"),furnitureFurnituresList:document.querySelector(".furniture-list"),furnitureLoadMoreBtn:document.querySelector(".load-more-button"),furnitureLoader:document.querySelector("div.container-furniture .loader"),feedbackFeedbacksList:document.querySelector(".swiper-wrapper"),orderBackdrop:document.querySelector("[data-backdrop-order]"),orderCloseBtn:document.querySelector("[data-backdrop-order-close]"),orderForm:document.querySelector(".form-modal"),orderLoader:document.querySelector("[data-loader-order]")};function N(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"};new O(".accordion-list",e)}function U(){new S(".swiper",{modules:[C,M,T,x],speed:350,slidesPerGroup:1,grabCursor:!0,loop:!1,loopPreventsSliding:!0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".paginator",clickable:!0},navigation:{nextEl:".btn-next",prevEl:".btn-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},keyboard:{enabled:!0,onlyInViewport:!0}})}function H(){a.menuBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",I),a.menuBackdrop.addEventListener("click",$),a.menuCloseBtn.addEventListener("click",q),a.menuLinksList.addEventListener("click",P)}function L(){a.menuBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",I),a.menuBackdrop.removeEventListener("click",$),a.menuCloseBtn.removeEventListener("click",q),a.menuLinksList.removeEventListener("click",P)}const h="https://furniture-store-v2.b.goit.study",v={FURNITURES:"/api/furnitures",FURNITURES_BY_ID:"/api/furnitures/",CATEGORIES:"/api/categories",FEEDBACKS:"/api/feedbacks",ORDERS:"/api/orders"},B=8,j=10,D={"Всі товари":"all-furniture","М'які меблі":"upholstered-furniture","Шафи та системи зберігання":"wardrobes-storage","Ліжка та матраци":"beds-mattresses",Столи:"tables","Стільці та табурети":"chairs-stools",Кухні:"kitchens","Меблі для дитячої":"kids-furniture","Меблі для офісу":"office-furniture","Меблі для передпокою":"hallway-furniture","Меблі для ванної кімнати":"bathroom-furniture","Садові та вуличні меблі":"outdoor-garden-furniture","Декор та аксесуари":"decor-accessories"};async function V(){const{data:e}=await d.get(`${h}${v.CATEGORIES}`);return e}async function k(e=1){const{data:t}=await d.get(`${h}${v.FURNITURES}`,{params:{page:e,limit:B}});return t}async function G(){const{data:{feedbacks:e}}=await d.get(`${h}${v.FEEDBACKS}`,{params:{limit:j}});return e}class z{constructor(t){var r,n;this._id=t._id,this.name=t.name,this.description=t.description,this.images=t.images||[],this.rate=t.rate||0,this.price=t.price,this.sizes=t.sizes,this.color=t.color||[],this.type=t.type,this.category={_id:((r=t.category)==null?void 0:r._id)||"",name:((n=t.category)==null?void 0:n.name)||""}}getMainImage(){return this.images[0]||""}getAdditionalImages(){return this.images.slice(1)}getFormattedPrice(){return this.price.toLocaleString("uk-UA")}getCategoryName(){return this.category.name}}async function K(e){try{const t=await d.get(`${h}/furnitures/${e}`);return new z(t.data)}catch(t){throw console.error("Error fetching furniture:",t),t}}async function A(e=1,t="all"){const{data:r}=await d.get(`${h}${v.FURNITURES}`,{params:{page:e,limit:B,category:t}});return r}function X(e){const r=[{_id:"all",name:"Всі товари"},...e].map(({_id:n,name:i})=>`
        <li class="category-item"
            data-category-id="${n}" 
            data-category-type="${D[i]||"unknown"}"
        >
            <p class="category-name">${i}</p>
        </li>
        `).join("");a.furnitureCategoriesList.insertAdjacentHTML("beforeend",r)}function E(e){const t=e.map(({_id:r,images:n,name:i,color:o,price:c})=>{const s=o.map(m=>`<li class="furniture-color" style="background-color: ${m};"></li>`).join("");return`
            <li class="furniture-item" data-category-id="${r}">
                <img class="furniture-image" src="${n[0]}" alt="${i}"/>
                <div class="furniture-info">
                    <h3 class="furniture-name">${i}</h3>
                    <ul class="furniture-colors">
                        ${s}
                    </ul>
                    <p class="furniture-price">${c} грн</p>
                </div>
                <button class="furniture-button" type="button">Детальніше</button>
            </li>
            `}).join("");a.furnitureFurnituresList.insertAdjacentHTML("beforeend",t)}function w(){console.log("furnitureLoadMoreBtn show"),a.furnitureLoadMoreBtn.classList.remove("is-hidden")}function R(){console.log("furnitureLoadMoreBtn hide"),a.furnitureLoadMoreBtn.classList.add("is-hidden")}function F(){a.furnitureLoader.classList.remove("is-hidden")}function y(){a.furnitureLoader.classList.add("is-hidden")}function _(e){a.furnitureCategoriesList.querySelectorAll(".category-item").forEach(t=>t.classList.remove("category-item-active")),e.classList.add("category-item-active")}function Y(e){const t=e.map(({rate:r,descr:n,name:i})=>`
        <li class="swiper-slide">
          <div class="feedback-item">
            <p class="feedback-rate"> ${r}</p>
            <p class="feedback-descr">${n}</p>
            <p class="feedback-author">${i}</p>
          </div>
        </li>`).join("");a.feedbackFeedbacksList.insertAdjacentHTML("beforeend",t)}function W(e){const t=e.target;t.classList.remove("invalid");const r=t.parentElement.querySelector(".error-text");r&&(r.style.opacity=0)}a.orderForm.querySelectorAll(".form-input").forEach(e=>{e.addEventListener("input",W)});let l=null,p=null;async function J(){p="all",l=1;try{const e=await V();X(e);const t=a.furnitureCategoriesList.querySelector('.category-item[data-category-id="all"]');_(t);const{furnitures:r,totalItems:n,limit:i}=await k();E(r),y(),i*l<n&&w();const o=await G();Y(o),U(),N()}catch(e){console.log(e.message)}finally{y()}}function Q(){H()}function q(){L()}function $(e){e.target===a.menuBackdrop&&L()}function I(e){e.key==="Escape"&&L()}function P(e){e.target.nodeName==="A"&&L()}async function Z(e){const t=e.target.closest(".category-item");if(t){_(t),l=1,a.furnitureFurnituresList.innerHTML="",R(),F();try{p=t.dataset.categoryId;const{furnitures:r,totalItems:n,limit:i}=p==="all"?await k(l):await A(l,p);E(r),i*l<n&&w()}catch(r){console.log(r.message)}finally{y()}}}async function ee(){l++,R(),F();try{const{furnitures:e,totalItems:t,limit:r}=p==="all"?await k(l):await A(l,p);E(e),r*l<t&&(console.log(r*l<t),w())}catch(e){console.log(e.message)}finally{y()}}class te{constructor(t,r={}){this.container=t,this.maxStars=r.max||5,this.currentRating=r.rating||0,this.step=r.step||.5,this.readOnly=r.readOnly||!1,this.onChange=r.onChange||null,this.init()}init(){this.container.classList.add("star-rating-container"),this.container.innerHTML="";for(let t=1;t<=this.maxStars;t++){const r=document.createElement("span");r.classList.add("star"),r.dataset.value=t,this.container.appendChild(r)}this.readOnly||(this.container.addEventListener("click",this.handleClick.bind(this)),this.container.addEventListener("mousemove",this.handleHover.bind(this)),this.container.addEventListener("mouseleave",this.handleMouseLeave.bind(this))),this.setRating(this.currentRating)}handleClick(t){const r=t.target.closest(".star");if(!r)return;const n=parseFloat(r.dataset.value),i=r.getBoundingClientRect(),o=t.clientX-i.left,c=i.width;let s;this.step===.5&&o<c/2?s=n-.5:s=n,this.setRating(s),this.onChange&&this.onChange(s)}handleHover(t){const r=t.target.closest(".star");if(!r)return;const n=parseFloat(r.dataset.value),i=r.getBoundingClientRect(),o=t.clientX-i.left,c=i.width;let s;this.step===.5&&o<c/2?s=n-.5:s=n,this.renderStars(s)}handleMouseLeave(){this.renderStars(this.currentRating)}setRating(t){this.currentRating=Math.min(Math.max(t,0),this.maxStars),this.renderStars(this.currentRating)}renderStars(t){this.container.querySelectorAll(".star").forEach((n,i)=>{const o=i+1;n.classList.remove("full","half","empty"),t>=o?n.classList.add("full"):t>=o-.5?n.classList.add("half"):n.classList.add("empty")})}getRating(){return this.currentRating}}function re(e){const t=document.querySelector(".product_modal_img > img");t&&e.getMainImage()&&(t.src=e.getMainImage(),t.alt=e.name);const r=document.querySelectorAll(".product_modal_img_horizontal img"),n=e.getAdditionalImages();r.forEach((f,u)=>{n[u]&&(f.src=n[u],f.alt=`${e.name} ${u+2}`)});const i=document.querySelector(".product_modal_name");i&&(i.textContent=e.name);const o=document.querySelector(".product_modal_category");o&&(o.textContent=e.getCategoryName());const c=document.querySelector(".price_number");c&&(c.textContent=e.getFormattedPrice());const s=document.querySelector(".modal_description");s&&(s.textContent=e.description);const m=document.querySelector(".product_modal_size");m&&(m.textContent=`Розміри: ${e.sizes}`),window.starRating&&window.starRating.setRating(e.rate);const g=document.querySelector(".product_colors");g&&e.color&&e.color.length>0&&(g.innerHTML="",e.color.forEach(f=>{const u=document.createElement("li");u.classList.add("product_color_circle"),u.style.backgroundColor=f,g.appendChild(u)}))}async function ne(e){const t=document.querySelector("[data-backdrop-furniture-details]");if(!t){console.error("Modal backdrop not found");return}try{const r=await K(e);re(r),t.classList.add("is-open")}catch(r){console.error("Failed to load furniture details:",r),alert("Не вдалося завантажити деталі меблів. Спробуйте ще раз.")}}function b(){const e=document.querySelector("[data-backdrop-furniture-details]");e&&e.classList.remove("is-open")}function ie(){const e=document.querySelector("[data-backdrop-order]");e&&e.classList.add("is-open")}function oe(){document.addEventListener("click",n=>{const i=n.target.closest("[data-furniture-id]");if(i){n.preventDefault();const o=i.dataset.furnitureId;ne(o)}});const e=document.querySelector(".product_modal_close");e==null||e.addEventListener("click",b);const t=document.querySelector("[data-backdrop-furniture-details]");t==null||t.addEventListener("click",n=>{n.target===t&&b()});const r=document.querySelector(".product_modal_button");r==null||r.addEventListener("click",n=>{n.preventDefault(),ie()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&b()})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#my-rater");if(e){const t=new te(e,{max:5,rating:4.5,step:.5,readOnly:!0,onChange:r=>{console.log("New rating:",r)}});window.updateRating=r=>{t.setRating(r)},window.starRating=t}oe()});const ae="https://furniture-store-v2.b.goit.study/api";d.defaults.baseURL=ae;const se=document.querySelector(".popular-list");async function ce(){try{const{data:e}=await d.get("/furnitures",{params:{type:"popular"}}),r=e.furnitures.map(n=>{const{_id:i,name:o,images:c,price:s,color:m}=n,g=c[0];return`
          <li class="furniture-item swiper-slide" data-id="${i}">
            <div class="furniture-visual">
              <img src="${g}" alt="${o}" width="310" height="257">
            </div>
            <div class="furniture-info">
              <h3 class="furniture-name">${o}</h3>
              <ul class="color-list">
                ${m.map(f=>`<li class="color-dot" style="background-color:${f}"></li>`).join("")}
              </ul>
              <p class="furniture-price">${s} грн</p>
            </div>
            <button class="furniture-btn" type="button">Детальніше</button>
          </li>
        `}).join("");se.insertAdjacentHTML("beforeend",r)}catch(e){console.error(e)}}async function le(){await ce();const e=new S(".popular-viewport",{modules:[C,M],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,centeredSlides:!1,pagination:{el:".popular-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".popular-next",prevEl:".popular-prev"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:4}},slidesOffsetBefore:0,slidesOffsetAfter:0}),t=document.querySelector(".popular-prev"),r=document.querySelector(".popular-next"),n=()=>{t.toggleAttribute("disabled",e.isBeginning),r.toggleAttribute("disabled",e.isEnd)};e.on("afterInit slideChange reachBeginning reachEnd fromEdge",n),n()}le();document.addEventListener("DOMContentLoaded",J);a.menuOpenBtn.addEventListener("click",Q);a.furnitureCategoriesList.addEventListener("click",Z);a.furnitureLoadMoreBtn.addEventListener("click",ee);
//# sourceMappingURL=index.js.map
