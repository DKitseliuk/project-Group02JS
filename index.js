import{A as V,a as d,i as D}from"./assets/vendor-Ddh-El-k.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const r={menuOpenBtn:document.querySelector(".header-burger-btn"),menuCloseBtn:document.querySelector(".burger-menu-close"),menuBackdrop:document.querySelector(".burger-menu"),menuLinksList:document.querySelector(".content-list"),furnitureCategoriesList:document.querySelector(".category-list"),furnitureFurnituresList:document.querySelector(".furniture-list"),furnitureLoadMoreBtn:document.querySelector(".load-more-button"),furnitureLoader:document.querySelector("div.container-furniture .loader"),feedbackFeedbacksList:document.querySelector(".swiper-wrapper"),furnitureDetailsBackdrop:document.querySelector("[data-backdrop-furniture-details]"),furnitureDetailsModal:document.querySelector(".furniture-modal"),furnitureDetailsCloseBtn:document.querySelector("[data-backdrop-furniture-close]"),furnitureDetailsImages:document.querySelector(".furniture-modal-img-list"),furnitureDetailsInfo:document.querySelector(".furniture-modal-info"),furnitureDetailsOrderBtn:document.querySelector("[data-backdrop-furniture-order"),orderBackdrop:document.querySelector("[data-backdrop-order]"),orderCloseBtn:document.querySelector("[data-backdrop-order-close]"),orderForm:document.querySelector(".form-modal"),orderLoader:document.querySelector("[data-loader-order]")};function Z(){const e={duration:350,showMultiple:!1,elementClass:"accordion-item",triggerClass:"accordion-trigger",panelClass:"accordion-panel",activeClass:"accordion-active"};new V(".accordion-list",e)}function J(){r.menuBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",R),r.menuBackdrop.addEventListener("click",T),r.menuCloseBtn.addEventListener("click",O),r.menuLinksList.addEventListener("click",N)}function E(){r.menuBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",R),r.menuBackdrop.removeEventListener("click",T),r.menuCloseBtn.removeEventListener("click",O),r.menuLinksList.removeEventListener("click",N)}const f="https://furniture-store-v2.b.goit.study",m={FURNITURES:"/api/furnitures",FURNITURES_BY_ID:"/api/furnitures/",CATEGORIES:"/api/categories",FEEDBACKS:"/api/feedbacks",ORDERS:"/api/orders"},$=8,Q=10,W={"Всі товари":"all-furniture","М'які меблі":"upholstered-furniture","Шафи та системи зберігання":"wardrobes-storage","Ліжка та матраци":"beds-mattresses",Столи:"tables","Стільці та табурети":"chairs-stools",Кухні:"kitchens","Меблі для дитячої":"kids-furniture","Меблі для офісу":"office-furniture","Меблі для передпокою":"hallway-furniture","Меблі для ванної кімнати":"bathroom-furniture","Садові та вуличні меблі":"outdoor-garden-furniture","Декор та аксесуари":"decor-accessories"};async function ee(){const{data:e}=await d.get(`${f}${m.CATEGORIES}`);return e}async function S(e=1){const{data:t}=await d.get(`${f}${m.FURNITURES}`,{params:{page:e,limit:$}});return t}async function M(e=1,t="all"){const{data:n}=await d.get(`${f}${m.FURNITURES}`,{params:{page:e,limit:$,category:t}});return n}async function re(e){const{data:t}=await d.get(`${f}${m.FURNITURES_BY_ID}${e}`);return console.log(t),t}async function te(){const{data:{feedbacks:e}}=await d.get(`${f}${m.FEEDBACKS}`,{params:{limit:Q}});return e}async function oe(e){return await d.post(`${f}${m.ORDERS}`,e)}function ne(e){const n=[{_id:"all",name:"Всі товари"},...e].map(({_id:a,name:o})=>`
        <li class="category-item"
            data-category-id="${a}" 
            data-category-type="${W[o]||"unknown"}"
        >
            <p class="category-name">${o}</p>
        </li>
        `).join("");r.furnitureCategoriesList.insertAdjacentHTML("beforeend",n)}function F(e){const t=e.map(({_id:n,images:a,name:o,color:i,price:s})=>{const g=i.map(u=>`<li class="furniture-color" style="background-color: ${u};"></li>`).join("");return`
            <li class="furniture-item" data-furniture-id="${n}">
                <img class="furniture-image" src="${a[0]}" alt="${o}"/>
                <div class="furniture-info">
                    <h3 class="furniture-name">${o}</h3>
                    <ul class="furniture-colors">
                        ${g}
                    </ul>
                    <p class="furniture-price">${s} грн</p>
                </div>
                <button class="furniture-button" type="button">Детальніше</button>
            </li>
            `}).join("");r.furnitureFurnituresList.insertAdjacentHTML("beforeend",t)}function C(){console.log("furnitureLoadMoreBtn show"),r.furnitureLoadMoreBtn.classList.remove("is-hidden")}function q(){console.log("furnitureLoadMoreBtn hide"),r.furnitureLoadMoreBtn.classList.add("is-hidden")}function w(){r.furnitureLoader.classList.remove("is-hidden")}function k(){r.furnitureLoader.classList.add("is-hidden")}function A(e){r.furnitureCategoriesList.querySelectorAll(".category-item").forEach(t=>t.classList.remove("category-item-active")),e.classList.add("category-item-active")}function ie(e){const t=e.map(({rate:n,descr:a,name:o})=>`
        <li class="swiper-slide">
          <div class="feedback-item">
            <p class="feedback-rate"> ${n}</p>
            <p class="feedback-descr">${a}</p>
            <p class="feedback-author">${o}</p>
          </div>
        </li>`).join("");r.feedbackFeedbacksList.insertAdjacentHTML("beforeend",t)}function ae(e){const{name:t,category:{name:n},price:a,rate:o,color:i,description:s,sizes:g,images:u}=e,p=u.map(y=>`
        <li class="furniture-modal-img-item">
          <img
            class="furniture-modal-img"
            src="${y}"
            alt="${s}"
            loading="lazy"
          />
      </li>
      `).join(""),K=i.map(y=>`
        <li
            class="furniture-modal-color"
            style="background-color: ${y}"
            data-color="${y}"
          >
        </li>
      `).join(""),Y=`
    <h3 class="furniture-modal-name">${t}</h3>
    <p class="furniture-modal-category">${n}</p>
    <p class="furniture-modal-price">${a} грн</p>
    <div class="furniture-modal-rate">${o}</div>
    <p class="furniture-modal-subtitle">Колір</p>
    <ul class="furniture-modal-colors">${K}</ul>
    <p class="furniture-modal-description">${s}</p>
    <p class="furniture-modal-size">Розміри: ${g}</p>
  `;r.furnitureDetailsImages.innerHTML=p,r.furnitureDetailsInfo.innerHTML=Y}function I(e){document.querySelectorAll(".furniture-modal-color").forEach(t=>t.classList.remove("current-color")),e.classList.add("current-color")}function se(){r.orderLoader.classList.remove("is-hidden")}function ce(){r.orderLoader.classList.add("is-hidden")}function ue(){r.orderBackdrop.classList.add("is-open"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",z),r.orderCloseBtn.addEventListener("click",X),r.orderBackdrop.addEventListener("click",x),r.orderForm.addEventListener("submit",G)}function h(){r.orderBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",z),r.orderCloseBtn.removeEventListener("click",X),r.orderBackdrop.removeEventListener("click",x),r.orderForm.removeEventListener("submit",G)}function le(e){let t=!0;const n=e.querySelector("#user-name"),a=e.querySelector("#user-phone"),o=e.querySelector("#user-comment");e.querySelectorAll(".error-text").forEach(p=>p.style.opacity=0),e.querySelectorAll(".form-input").forEach(p=>p.classList.remove("invalid")),/^[A-Za-zА-Яа-яЇїІіЄєҐґ'\-\s]{2,}$/.test(n.value.trim())||(b(n,"Введіть коректне ім'я (лише літери, мінімум 2)"),t=!1);const s=a.value.trim().replace(/\D/g,"");/^[0-9]{12}$/.test(s)||(b(a,"Введіть коректний номер телефону (12 цифр, наприклад 380XXXXXXXXX)"),t=!1);const u=o.value.trim();return u.length>0&&u.length<5&&(b(o,"Коментар має містити щонайменше 5 символів"),t=!1),t}function de(){r.orderForm.reset(),r.orderForm.querySelectorAll(".error-text").forEach(e=>e.style.opacity=0),r.orderForm.querySelectorAll(".form-input").forEach(e=>e.classList.remove("invalid"))}function b(e,t){const n=e.parentElement.querySelector(".error-text");e.classList.add("invalid"),n&&(n.textContent=t,n.style.opacity=1)}function fe(e){const t=e.target;t.classList.remove("invalid");const n=t.parentElement.querySelector(".error-text");n&&(n.style.opacity=0)}r.orderForm.querySelectorAll(".form-input").forEach(e=>{e.addEventListener("input",fe)});function me(){r.furnitureDetailsBackdrop.classList.add("is-open"),r.furnitureDetailsModal.scrollTop=0,document.body.classList.add("no-scroll"),document.addEventListener("keydown",U),r.furnitureDetailsCloseBtn.addEventListener("click",P),r.furnitureDetailsBackdrop.addEventListener("click",_),r.furnitureDetailsOrderBtn.addEventListener("click",j),document.querySelector(".furniture-modal-colors").addEventListener("click",H)}function B(){r.furnitureDetailsBackdrop.classList.remove("is-open"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",U),r.furnitureDetailsCloseBtn.removeEventListener("click",P),r.furnitureDetailsBackdrop.removeEventListener("click",_),r.furnitureDetailsOrderBtn.removeEventListener("click",j),document.querySelector(".furniture-modal-colors").removeEventListener("click",H)}let c=null,l=null,L=null,v=null;async function pe(){l="all",c=1;try{const e=await ee();ne(e);const t=r.furnitureCategoriesList.querySelector('.category-item[data-category-id="all"]');A(t);const{furnitures:n,totalItems:a,limit:o}=await S();F(n),k(),o*c<a&&C();const i=await te();ie(i),Z()}catch(e){console.log(e.message)}finally{k()}}function ge(){J()}function O(){E()}function T(e){e.target===r.menuBackdrop&&E()}function R(e){e.key==="Escape"&&E()}function N(e){e.target.nodeName==="A"&&E()}async function ye(e){const t=e.target.closest(".category-item");if(t){A(t),c=1,r.furnitureFurnituresList.innerHTML="",q(),w();try{l=t.dataset.categoryId;const{furnitures:n,totalItems:a,limit:o}=l==="all"?await S(c):await M(c,l);F(n),o*c<a&&C()}catch(n){console.log(n.message)}finally{k()}}}async function Le(){c++,q(),w();try{const{furnitures:e,totalItems:t,limit:n}=l==="all"?await S(c):await M(c,l);F(e),n*c<t&&(console.log(n*c<t),C())}catch(e){console.log(e.message)}finally{k()}}async function ke(e){if(e.target.nodeName==="BUTTON"){L=e.target.closest(".furniture-item").dataset.furnitureId;try{const t=await re(L);ae(t),v=t.color[0],I(document.querySelector(".furniture-modal-color"))}catch(t){console.log(t.message)}console.log(L),console.log(v),me()}}function P(){B()}function _(e){e.target===r.furnitureDetailsBackdrop&&B()}function U(e){e.key==="Escape"&&B()}function j(e){B(),ue()}function H(e){e.target.nodeName==="LI"&&(v=e.target.dataset.color,I(e.target))}function X(){h()}function x(e){e.target===r.orderBackdrop&&h()}function z(e){e.key==="Escape"&&h()}async function G(e){if(e.preventDefault(),!le(r.orderForm))return;se();const t=r.orderForm.elements["user-name"].value.trim(),n=r.orderForm.elements["user-phone"].value.trim().replace(/\D/g,""),a=r.orderForm.elements["user-comment"].value.trim()||"Немає коментаря",o={name:t,phone:n,modelId:L||"682f9bbf8acbdf505592ac36",color:v||"#1212ca",comment:a};try{const i=await oe(o);console.log("Вся відповідь сервера:",i),console.log("Тільки data:",i.data),D.success({title:"Успіх!",message:`Замовлення №${i.data.orderNum} успішно створено.`,position:"topRight"}),de(),h()}catch(i){let s="Сталася невідома помилка. Спробуйте ще раз.";i.response&&i.response.data&&i.response.data.message&&(s=i.response.data.message),D.error({title:"Помилка",message:s,position:"topRight"})}finally{ce()}}document.addEventListener("DOMContentLoaded",pe);r.menuOpenBtn.addEventListener("click",ge);r.furnitureCategoriesList.addEventListener("click",ye);r.furnitureLoadMoreBtn.addEventListener("click",Le);r.furnitureFurnituresList.addEventListener("click",ke);
//# sourceMappingURL=index.js.map
